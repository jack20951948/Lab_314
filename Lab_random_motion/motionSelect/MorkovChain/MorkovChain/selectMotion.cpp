#include <iostream>
#include <windows.h>
#include <ctime>
#include <cmath>
#include <stdlib.h>
using namespace std;

int main()
{
	int ite = 1000;
	int current_action = 0;
	int current_speed = 0;
	int no = 0;
	srand((unsigned)time(0));  //當前時間 //NULL為當前時間總秒數
	double Calc_prob[27][27] = {

		//  0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//0
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//1
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//2
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//3
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//4
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//5
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//6
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//7
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//8
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//9
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//10
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//11
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//12
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//13
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//14
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//15
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//16
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//17
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//18
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//19
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//20
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//21
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//22
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//23
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//24
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//25
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//26

	};

	double Calc_Speed_prob[27][3] = {

		//slow, mid ,fast
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},
		{  0,  0,  0},

	};

	int Action_prob[27][27] = {

		//  0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26
		 { 75,  0,  0,  1,  0,  3,  2,  0,  0,  1,  1,  2,  0,  4,  2,  0,  1,  1,  1,  1,  0,  2,  2,  0,  0,  0,  0},//0
		 { 60, 40,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//1
		 { 67,  0, 33,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//2
		 { 80,  0,  0, 20,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//3
		 { 67,  0,  0,  0, 33,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//4
		 { 82,  0,  0,  0,  0, 16,  2,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//5
		 { 77,  0,  0,  0,  0,  0, 20,  0,  0,  0,  0,  0,  0,  0,  3,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//6
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//7
		 { 67,  0,  0,  0,  0,  0,  0,  0, 33,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//8
		 {100,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//9
		 { 88,  0,  0,  6,  0,  0,  0,  0,  0,  0,  6,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//10
		 { 89,  0,  0,  0,  0,  0,  0,  0,  0,  0,  4,  4,  0,  4,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//11
		 {100,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//12
		 { 85,  0,  0,  0,  0,  2,  0,  0,  0,  2,  0,  0,  2,  8,  0,  0,  0,  0,  0,  0,  0,  2,  0,  0,  0,  0,  0},//13
		 { 96,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  4,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//14
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//15
		 {100,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//16
		 { 81,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 14,  5,  0,  0,  0,  0,  0,  0,  0,  0},//17
		 { 89,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 11,  0,  0,  0,  0,  0,  0,  0,  0},//18
		 { 76,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 18,  0,  6,  0,  0,  0,  0,  0},//19
		 {100,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//20
		 { 85,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 12,  4,  0,  0,  0,  0},//21
		 { 70,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  6,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//22
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//23
		 { 50,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 50,  0,  0,  0},//24
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//25
		 {  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},//26

	};

	int Speed_prob[27][3] = {

		//slow, mid ,fast
		{100,  0,  0},
		{ 60,  0, 40},
		{ 33, 33, 33},
		{ 40, 28, 32},
		{100,  0,  0},
		{ 64, 25, 11},
		{ 26, 46, 29},
		{  0,  0,  0},
		{ 33, 50, 17},
		{ 82,  9,  9},
		{ 62, 25, 12},
		{ 85,  7,  7},
		{ 50, 50,  0},
		{ 93,  3,  3},
		{ 81, 19,  0},
		{  0,  0,  0},
		{ 62, 12, 25},
		{ 43, 24, 33},
		{ 56, 11, 33},
		{ 35, 47, 18},
		{ 33, 33, 33},
		{ 81, 15,  4},
		{  9, 30, 61},
		{  0,  0,  0},
		{ 12, 88,  0},
		{  0,  0,  0},
		{  0,  0,  0},

	};
	for (int i = 0; i < 27; i++) {
		for (int act = 0; act < ite; act++) {
			current_action = i;
			int Random = (rand() % 100);  //設定範圍:由0開始取100個數
			double Prob = 0;
			for (int NA = 0; NA < 27; NA++) {
				if (Action_prob[current_action][NA] > 0) {
					Prob = Prob + Action_prob[current_action][NA];
					if (Random < Prob) {
						Calc_prob[current_action][NA]++;
						current_action = NA;
						break;
					}
				}
			}
		}
	}

	for (int i = 0; i < 27; i++) {
		for (int act = 0; act < ite; act++) {
			current_action = i;
			int Random = (rand() % 100);
			double Prob = 0;
			for (int speed = 0; speed < 3; speed++) {
				if (Speed_prob[current_action][speed] > 0) {
					Prob = Prob + Speed_prob[current_action][speed];
					if (Random < Prob) {
						if (speed == 0) {
							Calc_Speed_prob[current_action][speed]++;
							current_speed = speed;

						}
						else if (speed == 1) {
							Calc_Speed_prob[current_action][speed]++;
							current_speed = speed;

						}
						else if (speed == 2) {
							Calc_Speed_prob[current_action][speed]++;
							current_speed = speed;

						}
						break;
					}
				}
			}
		}
	}

	cout << "Action Probability:" << "\n";

	for (int i = 0; i < 27; i++) {
		for (int j = 0; j < 27; j++) {
			cout << llround((Calc_prob[i][j] / ite) * 100) << " ";
		}
		cout << " ," << "\n";
	}

	cout << "\n" << "\n";

	cout << "Speed Probability:" << "\n";
	for (int i = 0; i < 27; i++) {
		for (int j = 0; j < 3; j++) {
			cout << llround((Calc_Speed_prob[i][j] / ite) * 100) << " ";
		}
		cout << " ," << "\n";
	}

	current_action = 0;
	while (current_action >= 0) {
		int Random = (rand() % 100);
		double Prob = 0;
		for (int NA = 0; NA < 27; NA++) {
			if (Action_prob[current_action][NA] > 0) {
				Prob = Prob + Action_prob[current_action][NA];
				if (Random < Prob) {
					current_action = NA;
					cout << "Action: " << current_action << "\n";
					break;
				}
			}
		}
		Sleep(1000);
	}

}

